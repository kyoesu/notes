# Реализация алгоритма построения дерева решений и логистическая регрессия

## Часть 1.  Дерево решений

### Основная цель

Изучить алгоритм «Построение дерева решений» и научиться обрабатывать с его помощью данные.

### Теоретическая часть

Своевременная разработка и принятие правильного решения - это одна    из    главных    задач    работы    управленческого    персонала
организации, т.к. необдуманное решение может дорого обойтись компании. Зачастую на практике результат  одного  решения заставляет нас принимать следующее решение и т. д. Когда же нужно принять несколько решений в условиях неопределенности, когда каждое решение зависит от исхода предыдущего, то применяют схему, называемую деревом решений.

Дерево решений это графическое изображение  процесса принятия решений, в котором отражены альтернативные решения, соответствующие вероятности, и выигрыши для любых комбинаций альтернатив.

Дерево решений представляет один из способов разбиения множества данных на классы или категории. Корень дерева неявно содержит все классифицируемые данные, а листья определенные классы после выполнения классификации. Промежуточные узлы дерева представляют пункты принятия решения о выборе.

![pic](pic/doc1.png)Структура дерева решений

#### Построение дерева решений

Пусть нам задано некоторое обучающее множество $T$, содержащее объекты, каждый из которых характеризуется `m` атрибутами, причем один из них указывает на принадлежность объекта к определенному классу.

Пусть через ${C_1, C_2, ... C_k}$ обозначены классы, тогда существуют 3 ситуации:

* множество $T$ содержит один или более примеров, относящихся к одному классу $C_k$. Тогда дерево решений для $Т$ – это лист, определяющий класс $C_k$ ;
* множество $T$ не содержит ни одного примера, т.е. пустое множество. Тогда это снова лист, и класс, ассоциированный с листом, выбирается из другого множества отличного от $T$, скажем, из множества, ассоциированного с родителем;
* множество $T$ содержит примеры, относящиеся к разным классам. В этом случае следует разбить множество $T$ на некоторые подмножества. Для этого выбирается один из признаков, имеющий два и более отличных друг от друга значений $O_1, O_2, ... O_n$. $T$ разбивается на подмножества $T_1, T_2, ... T_n$, где каждое подмножество $T_i$ содержит все примеры, имеющие значение $O_i$ для выбранного признака. Эта процедура будет рекурсивно продолжаться до тех пор, пока конечное множество не будет состоять из  примеров, относящихся к одному и тому же классу.

Вышеописанная процедура лежит в основе многих современных алгоритмов построения дерева решений, этот метод известен еще под названием «разделение и захват». Очевидно, что при использовании данной методики построение дерева решений будет происходить сверху вниз.

#### Области применения дерева решений

Дерево решений является прекрасным инструментом в системах поддержки принятия решений, интеллектуального анализа данных (Data Mining). В областях, где высока цена ошибки, они послужат отличным подспорьем аналитика или руководителя.

Дерево решений успешно применяется для решения практических задач в следующих областях:

* Банковское дело. Оценка кредитоспособности клиентов банка при выдаче кредитов.
* Промышленность. Контроль качества продукции (выявление дефектов), испытания без разрушений (например, проверка качества сварки) и т.д.
* Медицина. Диагностика различных заболеваний.
* Молекулярная биология. Анализ строения аминокислот.
Это далеко не полный список областей, где можно использовать дерево решений, т.к. еще многие потенциальные области применения не исследованы.

### Практическая часть

Для загрузки данных примера импортируйте файл `C:\Program Files\BaseGroup\Deductor\Samples\CreditSample.txt` в АП «Deductor» с помощью мастера импорта. Все параметры импорта примите установленными по умолчанию. В окне выбора способа отображения данных выберите «Таблица», если он не выбран по умолчанию.

В результате в основном окне появится таблица, заполненная из указанного файла.

![pic]() Итог импорта данных

Запустите *мастер обработки данных*. В появившемся окне в разделе Data Mining выберете метод обработки «Дерево решений» и нажмите «Далее».

![pic]() Мастер обработки данных

На вкладке «Настройка значения столбцов» необходимо задать назначения столбцов данных. Почти все столбцы автоматически получили значение «Входные». Значение поля «Выдать кредит», которое принимает только два значения «Да» или «Нет», необходимо установить  в  «Выходное».  Также  необходимо  обозначить  столбцы «Код» и «№ паспорта» как  «Неиспользуемые» (так как значения этих столбцов уникальны, а это не позволит их классифицировать).

![pic]()Окно настройки назначений столбцов

Далее следует окно настройки разбиения исходного множества данных на подмножества. Оставьте это окно без изменений и нажмите кнопку «Далее».

Следующий этап – настройка параметров обучения дерева решений. Необходимо учитывать, что чем  больше  значение параметра «Уровень доверия, используемый при отсечении узлов дерева», тем больше будет дерево решений в итоге.

С помощью кнопки «Пуск» запускаем процесс построения дерева решений. По окончании процесса вы увидите график, отображающий уровень распознавания данных, количество узлов созданного дерева и правил, полученных в результате обработки.

![pic]()Процесс построения дерева решений

В последующем окне выбора способа отображения данных выберите «Дерево решений». А в последнем окне мастера обработки, по желанию, укажите имя и метку.

Результатом всех вышеописанных действий будет построенное дерево решений, которое отобразится в основном окне программы. На основании этого метода можно ответить на вопрос «Давать ли человеку кредит и если да, то при каких условиях».

![pic]()Готовое дерево решений

Из полученного дерева можно вывести правила выдачи кредитов.
Например:
* Если срок проживания в данной местности меньше 6,5 лет, то кредит не давать.
* Если срок проживания в данной местности больше 6,5 лет, займ обеспечен, возраст больше 20,5 лет, не имеется недвижимость, но имеется банковский счет, то кредит давать.

___
    Задание на проверку:
    1.	Постройте дерево решения для описанного выше примера. Попробуйте использовать различные значения параметров обучения дерева решения и сравните полученные деревья.
    2.	Выведите 5 правил из построенного дерева решений.
    3.	Приведите 4-5 примеров, для которых можно использовать метод обработки дерево решений, реализуйте один из них.
    4.	Составьте отчет.

## 













